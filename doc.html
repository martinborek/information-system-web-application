<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-2"/>
    <title>Projekt IIS</title>
    <style type="text/css">
    	table { border-collapse: collapse; }
    	td, th { border: 1px solid black; padding: 0.3em 0.5em; text-align: left; }
    	dt { font-weight: bold; margin-top: 0.5em; }
    </style>
</head>
<body>

<!-- Zkontrolujte prosím nastavení kódování v hlavièce dokumentu 
     podle pou¾itého editoru -->

<h1>Distribuce tisku</h1> <!-- Nahradte názvem svého zadání -->

<dl>
	<dt>Autoøi</dt>
	<dd>Martin Borek <!-- Nahraïte skuteèným jménem a e-mailem autora a popisem èinnosti -->
	    <a href="mailto:xborek08@stud.fit.vutbr.cz">xborek08@stud.fit.vutbr.cz</a> - Vytvoøení a nastavení databáze, implementace backendu.
			</dd>
	<dd>Michal Dobe¹ <!-- Nahraïte skuteèným jménem a e-mailem autora a popisem èinnosti -->
	    <a href="mailto:xdobes13@stud.fit.vutbr.cz">xdobes13@stud.fit.vutbr.cz</a> - 
		Vytvoøení u¾ivatelského rozhraní vèetnì grafiky, implementace frontendu.
	</dd>
	<dt>URL aplikace</dt>
	<dd><a href="http://www.stud.fit.vutbr.cz/~xdobes13/IIS">http://www.stud.fit.vutbr.cz/~xdobes13/IIS</a></dd>
</dl>

<h2>U¾ivatelé systému pro testování</h2>
<table>
<tr><th>Login</th><th>Heslo</th><th>Role</th></tr>
<tr><td>admin</td><td>12345</td><td>Administrátor</td></tr>
<tr><td>postman</td><td>abcde</td><td>Doruèovatel</td></tr>
</table>

<h2>Implementace</h2>
<p>
Oproti návrhu z pøedmìtu IDS byla do databáze pøidána tabulka administrátorù, kterých mù¾e být v systému více. Implementace obsahuje v¹echny pøípady pou¾ití uvedené v use-case diagramu.
</p>
<p>
<!-- TODO: Struèná dokumentace k implementaci, která popisuje, které PHP skripty implementují jednotlivé pøípady pou¾ití uvedené v use-case diagramu z IDS. -->
Vstupním bodem aplikace je index.php, který, podle úrovnì, na kterou je u¾ivatel autorizován, zobrazí buïto administrátorské nebo doruèovatelské rozhraní. 
Ka¾dá stránka aplikace je uvozena voláním funkce authenticate() z include/Security.php. Tato funkce zajistí, ¾e obsah dané stránky bude zobrazen pouze u¾ivateli s pøíslu¹ným oprávnìním. 
Pokud u¾ivatel nemá dostateèná oprávnìní, zobrazí pøihla¹ovací formuláø. Funkce authenticate() rovnì¾ zaji¹»uje odhlá¹ení u¾ivatele, pokud je neèinný. Implicitnì je tato doba nastavena na 5 minut.
</p>
<p>
Administrátorskou èást rozhraní tvoøí stránky AdminBody.php a AdminMenu.php. Na základì volby v AdminMenu volá AdminBody pøíslu¹nou funkci z modulù v include/ui. 
Jednotlivé pøípady pou¾ití jsou implementovány funkcemi v modulech include/ui. Napøíklad modul include/ui/Publications.php implementuje pøípady u¾ití "Pøidat tiskovinu", "Odebrat tiskovinu" a "Upravit tiskovinu".
</p>
<p>
    Doruèovatelskou èást rozhraní tvoøí stránky PostmanMenu.php a PostmanBody.php. Vzhledem k tomu, ¾e doruèovatelská èást systému obsahuje pouze jediný pøípad pou¾ití, je stránka PostmanBody napojena pøímo na BackendInterface.
<br/>
Pøihlá¹ený doruèovatel vidí seznam tiskovin, které má ten den roznést. Má mo¾nost si tento seznam vytisknout.
</p>
Pøehled implementace pøípadù u¾ití z UseCase diagramu z pøedmìtu IDS:
<ul>
    <li>Pøihlásit se: Security.php</li>
    <li>Registrovat nového zákazníka: Customers.php </li>
    <li>Evidovat platbu: Invoices.php</li>
    <li>Pøidat tiskovinu: Publications.php</li>
    <li>Odebrat tiskovinu: Publications.php</li>
    <li>Vyhledat fakturu: Invoices.php</li>
    <li>Evidovat termín neodebírání tiskovin: Search.php (pøedpokládáme rozsáhlou databázi zákazníkù, proto úpravì zákazníka pøedchází jeho vyhledání)</li>
    <li>Vytvoøit fakturu: Invoices.php</li>
    <li>Zobrazit denní seznam: PostmanBody.php</li>
</ul>
<p>
V¹echny operace s databází jsou provádìny prostøednictvím modulu BackendInterface.php. Komunikace s tímto modulem probíhá pøevá¾nì za pou¾ití tøíd v adresáøi include,
které reprezentují jednotlivé entity v systému zpùsobem, který je vhodný jak pro databázovou èást (backend), tak pro èást s u¾ivatelským rozhraním (frontend).
</p>
<p>
Spravování a pøidávání administrátorù, zákazníkù, doruèovatelù, tiskovin i odbìrù je mo¾né pøímo z hlavního menu po pøihlá¹ení administrátora. Pod spravováním je mo¾nost editace a odstranìní. Evidence termínu neodebírání tiskovin je souèástí editace zákazníkù. Platby se evidují pod správou faktur.
Mo¾nost vytvoøit faktury se nachází v sekci "Správa databáze".
</p>
<p>
Nìkterá data je tøeba aktualizovat dennì (datum následujícího výtisku publikace) a nìkterá mìsíènì (generování faktur), co¾ by pøi reálném nasazení zaji¹»ovala slu¾ba Cron, která by volala po¾adované scripty. V na¹em systému jsou tato data pro usnadnìní testování a hodnocení aktualizována manuálnì z u¾ivatelského rozhraní (sekce "Správa databáze").
</p>
<h2>Instalace</h2>
<ul>
<li>Softwarové po¾adavky: PHP 5.3, MySQL 5.5.40</li>
<li>Pro instalaci je tøeba umístit v¹echny soubory v koøenovém adresáøi i s adresáøi res a include do koøenového adresáøe webu. Poté je tøeba konfigurovat a inicializovat databázi.</li>
<li>Pro konfiguraci a inicializaci databáze staèí zavolat pøilo¾ený script db.sql. Pro usnadnìní testování je v administrátorském rozhraní mo¾nost uvedení databáze do výchozího stavu (Správa databáze &gt; Factory reset), která vyma¾e v¹echna data a nahradí je výchozími testovacími.</li>
</ul>

<h2>Známé problémy</h2>
<p>Byly implementovány v¹echny po¾adavky zadání (IIS a IDS).</p>
</body>
</html>
